<script id="template-upload" type="text/x-tmpl">
  <div class="upload">
    {%=o.name%}
    <div class="progress"><div class="bar" style="width: 0%"></div></div>
  </div>
</script>

<div class="panel panel-default">
  <div class="panel-body">
    <h2 class="text-center">A dive at <%= best_in_place @dive, :dive_site, type: :input %></h2>
    <div class="text-center">
      <%= link_to "Edit Dive", edit_dive_path(@dive), class: 'btn btn-info text-center' %>
      <%= link_to "Delete Dive", dive_path(@dive), :method => :delete, class: 'btn btn-warning text-center' %>
    </div>    
    <div class="row">
      <div class="col-md-6">
        <h3>
          <%= best_in_place @dive, :date, type: :date, display_as: :display_date %>
        </h3>
        <h4 class="times">
          From <%= best_in_place @dive, :time_in, display_as: :display_time_in %> to 
          <%= best_in_place @dive, :time_out, display_as: :display_time_out %>
          <br/>
          <!--<span class="length-of-time">
            <%= @dive.total_time_in_minutes %>
          </span> Minutes Long -->
        </h4>
        <% @dive.divers.each do |d| %>
          <%= link_to((image_tag d.image), d) %>
        <% end %>
      </div>
      <div class="col-md-6 change-units">
        <p>
          Dive Type: <%= best_in_place @dive, :dive_type, type: :select, collection: [["boat", "Boat Dive"], ["beach", "Beach Dive"], ["drift", "Drift Dive"], ["night", "Night Dive"]] %>
          <br/>   
          Dive Activity: <%= best_in_place @dive, :dive_activity, type: :select, collection: [["wreck", "Wreck Dive"], ["reef", "Reef Dive"], ["cave", "Cave Dive"], ["training", "Training Dive"]] %>
          <br/>        
          Maximum Depth: <%= best_in_place @dive, :depth, type: :input %>
          <%= content_tag :span, " meters", class: 'depth' %>
          <br/>
          Water Temperature: <%= best_in_place @dive, :temperature, type: :input %>
          <%= content_tag :span, " Â°C", class: 'temperature' %>
          <br/>
          Visibility: <%= best_in_place @dive, :visibility, type: :input %>
          <%= content_tag :span, " meters", class: 'visibility' %>
          <br/>
          Conditions: <%= best_in_place @dive, :conditions, type: :input %>
          <br/>                         
          Starting Air: <%= best_in_place @dive, :start_air, type: :input %>
          <%= content_tag :span, " bar", class: 'start_air' %>
          <br/>
          Ending Air: <%= best_in_place @dive, :end_air, type: :input %>
          <%= content_tag :span, " bar", class: 'end_air' %>
          <br/>
          Wetsuit? <%= best_in_place @dive, :wetsuit, type: :checkbox, collection: %w[No Yes] %>
        </p>
      </div>
    </div>
      <div class="col-md-6">
        <p>
          Notes: <%= best_in_place @dive, :notes, type: :textarea %>
        </p>
      </div>  
        <div class="row gallery">

            <div class="col-lg-12">
                <h3 class="page-header">Photos</h3>
            </div>

            <% @dive.photos.each do |photo| %>
            <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                <a class="fancybox" rel="group" href="<%= photo.image_url %>">
                  <span class="remove-icon" data-photo-id="<%= photo.id %>"><%= image_tag("/remove.png",  height: '16', width: '16') %></span>
                  <img class="image-thumb thumbnail" src="<%= photo.image_url(:thumb) %>"  alt="" />
                </a>
            </div>
            <% end %>
        </div><!-- end gallery row -->


        <div class="uploaderbutton">
          <div class="uploader">
          <%= form_for @photo, remote:true do |f| %>
            <%= f.hidden_field :dive_id, :value => @dive.id %>
            <%= f.file_field :image, :multiple => true, name: "photo[image]" %>
          <% end %>
          </div>
          <button class = "btn btn-success fileinput-button">Upload a Photo</button>
        </div>

    <div class="row fish">
      <div class="col-lg-12">
        <h3 class="page-header">Fish Sightings</h3>
      </div>
      <div class="col-lg-3 col-md-4 col-xs-6">
        <% @dive.fish.each do |fish|%>
          <p><%= fish.name %></p>
          <%= image_tag "http://#{fish.picture_link}", :alt => "" %>
        <% end %>
      </div>

      <%= form_for @dive, url: {action: "add_fish"} do |f| %>
        <%= label_tag :fish_name, "Fish Name:" %>
        <%= text_field_tag :fish_name %>
      <% end %>

    </div><!-- end fish row -->
    </div>
  </div>
</div>
